# Render Blueprint – TalkShop API
# https://render.com/docs/blueprint-spec
#
# Root Directory: leave BLANK (repo root). Do not set to "src" — build needs
# requirements.txt at repo root and start needs PYTHONPATH=src.
#
# Start command must run uvicorn (not "python -m api.main"). The app object
# is api.main:app; the server is uvicorn.
services:
  - type: web
    name: talkshop-api
    runtime: python
    # Root directory = repo root (default). Build and start run from here.
    buildCommand: pip install -r requirements.txt
    startCommand: PYTHONPATH=src python -m uvicorn api.main:app --host 0.0.0.0 --port $PORT
    envVars:
      - key: DATABASE_URL
        sync: false  # set in Render dashboard (e.g. Supabase connection string)
